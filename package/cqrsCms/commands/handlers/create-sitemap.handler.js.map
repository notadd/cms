{"version":3,"sources":["cqrsCms/commands/handlers/create-sitemap.handler.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,uCAA+E;AAC/E,oEAAiE;AACjE,uEAAkE;AAGlE,IAAa,oBAAoB,GAAjC;IACI,YAA6B,UAA0B,EAC1B,SAAyB;QADzB,eAAU,GAAV,UAAU,CAAgB;QAC1B,cAAS,GAAT,SAAS,CAAgB;IACtD,CAAC;IAEK,OAAO,CAAC,OAA2B,EAAE,QAA0B;;YACjE,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,MAAM,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC;YACnF,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YACrC,QAAQ,EAAE,CAAC;YACX,OAAO,CAAC,MAAM,EAAE,CAAC;QACrB,CAAC;KAAA;CACJ,CAAA;AAXY,oBAAoB;IADhC,qBAAc,CAAC,yCAAkB,CAAC;qCAEU,+BAAc;QACf,qBAAc;GAF7C,oBAAoB,CAWhC;AAXY,oDAAoB","file":"create-sitemap.handler.js","sourcesContent":["import { CommandHandler, EventPublisher, ICommandHandler } from \"@nestjs/cqrs\";\nimport { PageRepository } from \"../../repository/pageRepository\";\nimport { CreateParamCommand } from \"../impl/create-param.command\";\n\n@CommandHandler(CreateParamCommand)\nexport class CreateSitemapHandler implements ICommandHandler<CreateParamCommand> {\n    constructor(private readonly repositoty: PageRepository,\n                private readonly publisher: EventPublisher) {\n    }\n\n    async execute(command: CreateParamCommand, resolver: (value?) => void) {\n        const sitemap = this.publisher.mergeObjectContext(await this.repositoty.siteMap());\n        sitemap.createxml(command.createXml);\n        resolver();\n        sitemap.commit();\n    }\n}\n"]}
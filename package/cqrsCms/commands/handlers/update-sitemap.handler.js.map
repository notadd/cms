{"version":3,"sources":["cqrsCms/commands/handlers/update-sitemap.handler.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,uCAA+E;AAC/E,oEAAiE;AACjE,uEAAkE;AAGlE,IAAa,oBAAoB,GAAjC;IACI,YACqB,UAA0B,EAC1B,SAAyB;QADzB,eAAU,GAAV,UAAU,CAAgB;QAC1B,cAAS,GAAT,SAAS,CAAgB;IAE9C,CAAC;IAEK,OAAO,CAAC,OAA2B,EAAE,QAA0B;;YACjE,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,MAAM,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC;YACnF,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACvB,QAAQ,EAAE,CAAC;YACX,OAAO,CAAC,MAAM,EAAE,CAAC;QACrB,CAAC;KAAA;CACJ,CAAA;AAbY,oBAAoB;IADhC,qBAAc,CAAC,yCAAkB,CAAC;qCAGE,+BAAc;QACf,qBAAc;GAHrC,oBAAoB,CAahC;AAbY,oDAAoB","file":"update-sitemap.handler.js","sourcesContent":["import { CommandHandler, EventPublisher, ICommandHandler } from \"@nestjs/cqrs\";\nimport { PageRepository } from \"../../repository/pageRepository\";\nimport { DeleteParamCommand } from \"../impl/delete-param.command\";\n\n@CommandHandler(DeleteParamCommand)\nexport class UpdateSitemapHandler implements ICommandHandler<DeleteParamCommand> {\n    constructor(\n        private readonly repository: PageRepository,\n        private readonly publisher: EventPublisher,\n    ) {\n    }\n\n    async execute(command: DeleteParamCommand, resolver: (value?) => void) {\n        const sitemap = this.publisher.mergeObjectContext(await this.repository.siteMap());\n        sitemap.updatexml(\"0\");\n        resolver();\n        sitemap.commit();\n    }\n}\n"]}
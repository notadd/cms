{"version":3,"sources":["cqrsCms/events/handlers/classify-curd.handler.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,uCAA4D;AAC5D,qEAAiE;AACjE,uEAAkE;AAGlE,IAAa,iBAAiB,GAA9B;IACI,YAAqB,eAAgC;QAAhC,oBAAe,GAAf,eAAe,CAAiB;IACrD,CAAC;IAEK,MAAM,CAAC,KAAyB;;YAElC,IAAI,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE;gBAC/B,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,KAAK,EAAE;oBACjC,MAAM,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;iBACnF;gBACD,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,MAAM,EAAE;oBAClC,MAAM,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;iBACrF;aACJ;YAED,IAAI,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE;gBAC/B,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,KAAK,EAAE;oBACjC,MAAM,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;iBACnF;gBACD,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,MAAM,EAAE;oBAClC,MAAM,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;iBACrF;aACJ;YAED,IAAI,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE;gBAC/B,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,KAAK,EAAE;oBACjC,MAAM,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;iBAC/E;gBACD,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,MAAM,EAAE;oBAClC,MAAM,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;iBAChF;aACJ;YAED,IAAI,KAAK,CAAC,QAAQ,CAAC,gBAAgB,EAAE;gBACjC,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,KAAK,EAAE;oBACjC,MAAM,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,KAAK,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,EAAE,KAAK,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;iBAC9H;gBACD,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,MAAM,EAAE;oBAClC,MAAM,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC,KAAK,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,EAAE,KAAK,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;iBAC/H;aACJ;QACL,CAAC;KAAA;CACJ,CAAA;AA1CY,iBAAiB;IAD7B,oBAAa,CAAC,yCAAkB,CAAC;qCAEQ,kCAAe;GAD5C,iBAAiB,CA0C7B;AA1CY,8CAAiB","file":"classify-curd.handler.js","sourcesContent":["import { EventsHandler, IEventHandler } from \"@nestjs/cqrs\";\nimport { ClassifyService } from \"../../service/classify.service\";\nimport { ClassifyCurdEvents } from \"../impl/classify-curd.events\";\n\n@EventsHandler(ClassifyCurdEvents)\nexport class ClassifyCurdEvent implements IEventHandler<ClassifyCurdEvents> {\n    constructor(readonly classifyservice: ClassifyService) {\n    }\n\n    async handle(event: ClassifyCurdEvents) {\n        /*新增分类*/\n        if (event.classify.createClassify) {\n            if (event.classify.useFor === \"art\") {\n                await this.classifyservice.createClassifyArt(event.classify.createClassify.art);\n            }\n            if (event.classify.useFor === \"page\") {\n                await this.classifyservice.createClassifyPage(event.classify.createClassify.page);\n            }\n        }\n        /*修改分类*/\n        if (event.classify.updateClassify) {\n            if (event.classify.useFor === \"art\") {\n                await this.classifyservice.updateClassifyArt(event.classify.updateClassify.art);\n            }\n            if (event.classify.useFor === \"page\") {\n                await this.classifyservice.updateClassifyPage(event.classify.updateClassify.page);\n            }\n        }\n        /*删除分类*/\n        if (event.classify.deleteClassify) {\n            if (event.classify.useFor === \"art\") {\n                await this.classifyservice.deleteMethodFirst(event.classify.deleteClassify);\n            }\n            if (event.classify.useFor === \"page\") {\n                await this.classifyservice.deleteMethodSecond(event.classify.deleteClassify);\n            }\n        }\n        /*移动分类*/\n        if (event.classify.mobileClassifyId) {\n            if (event.classify.useFor === \"art\") {\n                await this.classifyservice.mobileClassifyArt(event.classify.mobileClassifyId.id, event.classify.mobileClassifyId.parentId);\n            }\n            if (event.classify.useFor === \"page\") {\n                await this.classifyservice.mobileClassifyPage(event.classify.mobileClassifyId.id, event.classify.mobileClassifyId.parentId);\n            }\n        }\n    }\n}\n"]}
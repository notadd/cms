{"version":3,"sources":["cqrsCms/events/handlers/article-curd.handler.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,uCAA4D;AAC5D,mEAA+D;AAC/D,qEAAgE;AAGhE,IAAa,gBAAgB,GAA7B;IACI,YAA6B,cAA8B;QAA9B,mBAAc,GAAd,cAAc,CAAgB;IAC3D,CAAC;IAEK,MAAM,CAAC,KAAwB;;YACjC,IAAI,KAAK,CAAC,OAAO,CAAC,aAAa,EAAE;gBAE7B,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CACnC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;aAC5C;YACD,IAAI,KAAK,CAAC,OAAO,CAAC,aAAa,EAAE;gBAE7B,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CACnC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;aAC5C;YACD,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,EAAE;gBAE1B,MAAM,KAAK,GAAkB,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC;gBACtD,MAAM,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;aACnD;YACD,IAAI,KAAK,CAAC,OAAO,CAAC,aAAa,EAAE;gBAE7B,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;aACxE;YACD,IAAI,KAAK,CAAC,OAAO,CAAC,gBAAgB,EAAE;gBAEhC,MAAM,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,KAAK,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;aAC9E;YACD,IAAI,KAAK,CAAC,OAAO,CAAC,aAAa,EAAE;gBAE7B,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CACnC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,GAAG,EAC/B,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,EACtC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,EACnC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CACrC,CAAC;aACL;QACL,CAAC;KAAA;CACJ,CAAA;AAtCY,gBAAgB;IAD5B,oBAAa,CAAC,uCAAiB,CAAC;qCAEgB,gCAAc;GADlD,gBAAgB,CAsC5B;AAtCY,4CAAgB","file":"article-curd.handler.js","sourcesContent":["import { EventsHandler, IEventHandler } from \"@nestjs/cqrs\";\nimport { ArticleService } from \"../../service/article.service\";\nimport { ArticleCurdEvents } from \"../impl/article-curd.events\";\n\n@EventsHandler(ArticleCurdEvents)\nexport class ArticleCurdEvent implements IEventHandler<ArticleCurdEvents> {\n    constructor(private readonly articleService: ArticleService) {\n    }\n\n    async handle(event: ArticleCurdEvents) {\n        if (event.article.createArticle) {\n            /*新增文章*/\n            await this.articleService.createArticle(\n                event.article.createArticle.article);\n        }\n        if (event.article.updateArticle) {\n            /*修改文章*/\n            await this.articleService.updateArticle(\n                event.article.updateArticle.article);\n        }\n        if (event.article.deleteById) {\n            /*放入回收站*/\n            const array: Array<number> = event.article.deleteById;\n            await this.articleService.deleteArticles(array);\n        }\n        if (event.article.recycleDelete) {\n            /*回收站删除*/\n            await this.articleService.recycleDelete(event.article.recycleDelete);\n        }\n        if (event.article.reductionArticle) {\n            /*回收站还原*/\n            await this.articleService.reductionArticle(event.article.reductionArticle);\n        }\n        if (event.article.pictureUpload) {\n            /*图片上传*/\n            await this.articleService.upLoadPicture(\n                event.article.pictureUpload.url,\n                event.article.pictureUpload.bucketName,\n                event.article.pictureUpload.rawName,\n                event.article.pictureUpload.base64,\n            );\n        }\n    }\n}\n"]}